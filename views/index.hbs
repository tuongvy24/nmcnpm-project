 {{> sidebar }}
<div class="col-lg-8 col-md-7">
  <div class="row">    
    <div class="col-lg-12" >
      <h2 class="mb-4">Data Crawler</h2>
      {{!-- FORM HERE --}}
      <form id="crawlerForm" method="post" action="/home">
        <div class="form-group">
          <label for="websiteSelect">Chọn trang web cần crawler:</label> <br>
          <select class="form-control" id="websiteSelect" name="selectedWebsite">
            {{#each weblists}}
            <option value="{{id}}">{{web_name}}</option>
            {{/each}}
            <!-- Add more options as needed -->
          </select> <br>
        </div> <br>
        
        <button type="submit" class="btn btn-primary">Submit</button><br>
        {{#if successMessage}}
        <div class="alert-primary">{{successMessage}}</div>
        {{else}}
        <div class="alert-danger">{{error}}</div>
        {{/if}}

        <h3 class="mt-3">Cron Job Results</h3>
        <div>
          <h4>Crawler 1:</h4>
          <p class="text-primary">{{crawlResults.crawler1}}</p>
          <h4>Crawler 2:</h4>
          <p class="text-primary">{{crawlResults.crawler2}}</p>
          <h4>Crawler 3:</h4>
          <p class="text-primary">{{crawlResults.crawler3}}</p>
        </div>
    
      </form>
    </div>

  </div>
</div>
{{!-- 
<script src="/socket.io/socket.io.js"></script>
<script>
    // Kết nối với server Socket.IO
    const socket = io();

    // Lắng nghe sự kiện crawlResultsUpdated từ server
    socket.on('crawlResultsUpdated', () => {
        console.log('Crawl results updated, reloading page...');
        window.location.reload(); // Reload lại trang khi có sự kiện crawlResultsUpdated
    });
</script> --}}
